#!/usr/bin/env tclsh
lappend auto_path [file join [file dirname [info script]] ".."]

package require spec/autorun

set example_files [list]

if { [llength $argv] > 0 } {
    for {set i 0} {$i < [llength $argv]} {incr i} {
        set pattern [lindex $argv $i]

        if { $pattern == "-f" } {
            incr i
            [Spec configuration] add_formatter [lindex $argv $i]
        } else {
            lappend example_files {*}[glob -nocomplain $pattern]
        }
    }
}

if { [llength $example_files] == 0 } {
    lappend example_files {*}[glob -nocomplain "spec/**/*_spec.tcl"]
}

foreach example_file $example_files {
    source $example_file
}